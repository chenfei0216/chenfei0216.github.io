webpackJsonp([10],{Dmlf:function(t,e){},Ijou:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("pFYg"),s=n.n(a),r=function(t,e){return t>e?e:t},i=function(t,e){return t<e?e:t},l=function(t,e,n){return t>=e&&t<=n},o=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1},c=function(t,e){for(var n=-1,a=0;a<t.length;a++)e(t[a])&&(n=a);return n},u={name:"xTable",mounted:function(){this.init()},data:function(){return{rows:28,cols:14,tableData:[],selecting:!1,select:null,showMenu:!1,selectedArea:null}},computed:{menu:function(){return{display:this.showMenu?"":"none"}}},methods:{findTopPosition:function(t,e){for(var n=e-1;n>=0;n--){var a=this.tableData[n].findIndex(function(e){return e.x===t});if(-1!==a)return{x:a,y:n,data:this.tableData[n][a]}}},calcSelectArea:function(t){var e=this,n=this.tableData[t.y1].findIndex(function(e){return e.x===t.x1});if(-1===n)for(var a=t.y1;a>=0;a--)if(-1!==(n=this.tableData[a].findIndex(function(e){return l(t.x1,e.x,e.x+e.colspan-1)&&l(t.y1,e.y,e.y+e.rowspan-1)}))){t.x1=this.tableData[a][n].x,t.y1=this.tableData[a][n].y,t.x1=r(t.x1,t.x2),t.y1=r(t.y1,t.y2),t.x2=i(t.x1,t.x2),t.y2=i(t.y1,t.y2);break}for(var o=function(n){var a=e.tableData[t.y1].findIndex(function(t){return t.x===n}),s=null;if(!((s=-1===a?e.findTopPosition(n,t.y1).data:e.tableData[t.y1][a]).x+s.colspan-1<=t.x2&&s.y===t.y1))return s.x+s.colspan-1>t.x2&&(t.x2=s.x+s.colspan-1),s.y<t.y1&&(t.y1=s.y),e.calcSelectArea(t),{v:void 0};n+=s.colspan-1,u=n},u=t.x1;u<=t.x2;u++){var d=o(u);if("object"===(void 0===d?"undefined":s()(d)))return d.v}for(var f=t.y1;f<=t.y2;f++){var x=this.tableData[f].findIndex(function(e){return e.x===t.x1});-1===x&&(x=c(this.tableData[f],function(e){return e.x<=t.x1}));var y=this.tableData[f][x];if(!(y.x===t.x1&&y.y+y.rowspan-1<=t.y2))return y.y+y.rowspan-1>t.y2&&(t.y2=y.y+y.rowspan-1),y.x<t.x1&&(t.x1=y.x),void this.calcSelectArea(t);f+=y.rowspan-1}for(var h=function(n){var a=e.tableData[t.y2].findIndex(function(t){return t.x===n}),s=null;if(!((s=-1===a?e.findTopPosition(n,t.y2).data:e.tableData[t.y2][a]).y+s.rowspan-1===t.y2&&s.x+s.colspan-1<=t.x2))return s.y+s.rowspan-1>t.y2&&(t.y2=s.y+s.rowspan-1),s.x+s.colspan-1>t.x2&&(t.x2=s.x+s.colspan-1),e.calcSelectArea(t),{v:void 0};n+=s.colspan-1,p=n},p=t.x1;p<=t.x2;p++){var v=h(p);if("object"===(void 0===v?"undefined":s()(v)))return v.v}for(var b=t.y1;b<=t.y2;b++){var w=this.tableData[b].findIndex(function(e){return e.x+e.colspan-1===t.x2});-1===w&&(w=c(this.tableData[b],function(e){return e.x<=t.x2}));var m=this.tableData[b][w];if(!(m.x+m.colspan-1===t.x2&&m.y+m.rowspan-1<=t.y2))return m.x+m.colspan-1>t.x2&&(t.x2=m.x+m.colspan-1),m.y+m.rowspan-1>t.y2&&(t.y2=m.y+m.rowspan-1),void this.calcSelectArea(t);b+=m.rowspan-1}},setSelectArea:function(t,e){if(this.selectedArea&&this.setSelected(this.selectedArea,!1),t&&e){var n={x1:r(t.x,e.x),y1:r(t.y,e.y),x2:i(t.x+t.colspan-1,e.x+e.colspan-1),y2:i(t.y+t.rowspan-1,e.y+e.rowspan-1)};this.calcSelectArea(n),this.setSelected(n,!0),this.selectedArea=n}},setSelected:function(t,e){for(var n=t.y1;n<=t.y2;n++)this.tableData[n].map(function(n){l(n.x,t.x1,t.x2)&&(n.selected=e)})},init:function(){window.document.oncontextmenu=function(){return!1};for(var t=[],e=0;e<this.rows;e++){for(var n=[],a=0;a<this.cols;a++)n.push({text:"row"+e+" col"+a,x:a,y:e,colspan:1,rowspan:1,selected:!1});t.push(n)}this.tableData=this.tableData.concat(t)},mousedown:function(t,e){if(0===t.button){this.showMenu=!1;this.selecting=!0,this.select={start:e,end:e},this.setSelectArea(e,e),document.addEventListener("mouseup",this.mouseup)}},mouseup:function(){this.selecting=!1,document.removeEventListener("mouseup",this.mouseup)},showContextmenu:function(t,e){e.selected?(this.$refs.tableContext.style.top=t.clientY+"px",this.$refs.tableContext.style.left=t.clientX+"px",this.showMenu=!0):this.setSelectArea()},mouseenter:function(t){this.selecting&&(this.select.end=t,this.setSelectArea(this.select.start,t))},mergeCell:function(){var t=this.selectedArea,e=this.tableData[t.y1],n=e.findIndex(function(t){return t.selected}),a=c(e,function(t){return t.selected});this.tableData[t.y1][n].rowspan=t.y2-t.y1+1,this.tableData[t.y1][n].colspan=t.x2-t.x1+1,e.splice(n+1,a-n);for(var s=t.y1+1;s<=t.y2;s++){e=this.tableData[s];var r=o(e,function(t){return t.selected}),i=c(e,function(t){return t.selected});-1!==r&&-1!==i&&e.splice(r,i-r+1)}this.selectedArea.x2=this.selectedArea.x1,this.selectedArea.y2=this.selectedArea.y1,this.setSelectArea(this.selectedArea.start,this.selectedArea.end),this.showMenu=!1},cellBorder:function(){for(var t=this.selectedArea,e=t.y1;e<=t.y2;e++){this.tableData[e].filter(function(t){return t.selected}).map(function(t){var e=t.style||{};e.border="1px solid #212121",t.style=e})}this.setSelected(this.selectedArea,!1),this.showMenu=!1},cellStyle:function(t){return t.style}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{class:["x-table",{"no-select":t.selecting}],attrs:{cellspacing:"1",cellpadding:"0"}},t._l(t.tableData,function(e,a){return n("tr",{key:a,staticClass:"tr"},t._l(e,function(e,a){return n("td",{key:a,class:["td",{selected:e.selected}],style:t.cellStyle(e),attrs:{colspan:e.colspan,rowspan:e.rowspan},on:{mousedown:function(n){t.mousedown(n,e)},mouseenter:function(n){t.mouseenter(e)}}},[n("div",{staticClass:"cell-container"},[n("div",{staticClass:"cell-content",attrs:{cellpadding:"0"}},[n("div",{staticClass:"x-cell"},[t._v("\n            "+t._s(e.text)+"\n          ")])])])])}))}))},staticRenderFns:[]};var f=n("VU/8")(u,d,!1,function(t){n("Dmlf")},"data-v-01b250d5",null);e.default=f.exports}});