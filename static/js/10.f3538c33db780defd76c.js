webpackJsonp([10],{P8zw:function(e,t){},"w/fB":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("M4fF"),l=i.n(n),o={name:"dept-manage",data:function(){return{dialogTitle:"",dialogVisible:!1,defaultProps:{children:"children",label:"label"},contextStyle:{},contextItem:null,contextNode:null,dept:{label:""},rules:{name:[{required:!0,message:"请输名称名称",trigger:"blur"},{max:10,message:"长度要小于10个字符",trigger:"blur"}]},id:4,data:[{label:"一级 1",id:1,children:[{label:"二级 1-1",id:2,children:[{id:3,label:"三级 1-1-1"}]}]}]}},methods:{hideContextMenu:function(){this.contextStyle.display="none",document.removeEventListener("click",this.hideContextMenu)},onTreeContextmenu:function(e,t,i,n){this.contextItem=t,this.contextNode=i,this.$refs.tree.setCurrentNode(i),this.contextStyle={top:e.pageY+"px",left:e.pageX+"px",display:"initial"},document.addEventListener("click",this.hideContextMenu)},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},add:function(){this.dialogTitle="新增",this.dialogVisible=!0,this.dept={label:""}},edit:function(){this.dialogTitle="修改",this.dialogVisible=!0,this.dept=l.a.cloneDeep(this.contextItem)},remove:function(){var e=this,t=this.contextNode.parent,i=t.data.children||t.data,n=i.findIndex(function(t){return t.label===e.contextItem.label});i.splice(n,1)},save:function(){var e=this;if("新增"===this.dialogTitle){this.contextItem.children||this.$set(this.contextItem,"children",[]);var t=l.a.cloneDeep(this.dept);t.id=this.id,this.id++,this.contextItem.children.push(t)}else{var i=this.contextNode.parent,n=i.data.children||i.data,o=n.findIndex(function(t){return t.id===e.contextItem.id});n.splice(o,1,this.dept)}this.dialogVisible=!1}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-aside",{attrs:{width:"240px"}},[i("div",{staticClass:"context-menu",style:e.contextStyle},[i("div",{on:{click:e.add}},[i("i",{staticClass:"context add el-icon-plus"}),e._v("新增")]),e._v(" "),i("div",{on:{click:e.edit}},[i("i",{staticClass:"context edit el-icon-edit"}),e._v("修改")]),e._v(" "),i("div",{on:{click:e.remove}},[i("i",{staticClass:"context delete el-icon-delete"}),e._v("删除")])]),e._v(" "),i("el-tree",{ref:"tree",attrs:{data:e.data,props:e.defaultProps,"node-key":"id","default-expand-all":"","highlight-current":"","expand-on-click-node":!1},on:{"node-click":e.hideContextMenu,"node-contextmenu":e.onTreeContextmenu}})],1),e._v(" "),i("el-main",[e._v("Main")]),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"40%","show-close":!1}},[i("el-form",{ref:"dept",attrs:{model:e.dept,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称",prop:"label"}},[i("el-input",{model:{value:e.dept.label,callback:function(t){e.$set(e.dept,"label",t)},expression:"dept.label"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(o,a,!1,function(e){i("P8zw")},"data-v-26ea76f8",null);t.default=d.exports}});